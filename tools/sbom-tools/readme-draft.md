# Forge SBOM Tools

Generate an SBOM and check its package list for vulnerabilities.

## Dependencies

- jq 1.6+
- Syft v0.60.0+
- Grype 
- `bash`, with support for `sed`, `grep`, `basename`, `dirname`, `mktemp`, `realpath`, which are standard with `coreutils`
- External HTTP access is required for Grype to retrieve the vulnerability database. Syft does not require an external connection except when scanning an external Docker file.

### Install jq, Syft, & Grype

Ubuntu/Debian: `sudo apt-get update && sudo apt-get install -y jq`

(Else adjust to suit your package manager if not apt.)

`curl -sSfL https://raw.githubusercontent.com/anchore/syft/main/install.sh | sh -s -- -b /usr/local/bin`

`curl -sSfL https://raw.githubusercontent.com/anchore/grype/main/install.sh | sh -s -- -b /usr/local/bin`

On macOS using Homebrew: `brew install jq syft grype`

## Generate SBOM

Script: `sbom-gen.sh`

This script will generate two json-formatted SBOM files from a target directory or archive of a type supported by Syft, including `.zip`, `.tar`, `.tar.gz`, `.7z`, `.tgz`, `.xz`, and others, including Docker images.

Two files will be created, one in SPDX format, and one in CycloneDX format based on the supplied target name: `sbom-{target}.spdx.json` and `sbom-{target}.cyclonedx.json`

Usage: `./sbom-gen.sh {target}`

## Vulnerability Check

Script: `vulncheck-sbom.sh`

This script will review a provided SBOM and check the found packages against a current vulnerability database it will downloads. The script is recommended to be run on the CycloneDX SBOM generated by the companion script, but will work equally with SPDX-formatted SBOMs. The script will output an updated SBOM including vulnerability information, with a file name based on the target input: `sbom-vulns-{target}.cyclonedx.json`.

Usage: `./vulncheck-sbom.sh sbom-{target}.cyclonedx.json`

Note: in an air-gapped environment, the Grype DB must be imported manually or the script will fail.

Import the database manually with `grype db import`

## License: MIT


